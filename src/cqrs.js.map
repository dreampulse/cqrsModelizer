{"version":3,"file":"cqrs.js","sourceRoot":"","sources":["cqrs.ts"],"names":["Command","Command.constructor","Command.handle","Command.execute","LocalEventStore","LocalEventStore.constructor","LocalEventStore.save","LocalEventStore.restore","LocalEventStore.replay","LocalEventStore.close","MongoEventStore","MongoEventStore.constructor","MongoEventStore.close","MongoEventStore.save","MongoEventStore.restore","MongoEventStore.replay","DomainEvent","DomainEvent.constructor","DomainEvent.handle","DomainEvent.emit","LocalProjection","LocalProjection.constructor","LocalProjection.subscribe","MongoProjection","MongoProjection.constructor","MongoProjection.query","MongoProjection.close"],"mappings":"AAAA,2CAA2C;AAA3C,oBAEwB;;AAExB,gCAAoC;;AAEpC,CAAC,CAAC,gBAAgB,GAAG,IAAI;;AAEzB,gBAAgB;AAChB,cAAc;AAEd;IAAAA;IAUAC,CAACA;AAAAD,IAPCA,2BAAAA,UAAcA,YAAuCA;QACnDE,IAAIA,CAACA,YAAYA,GAAGA,YAAYA;IAClCA,CAACA;;IAEDF,4BAAAA,UAAeA,MAAQA;QACrBG,OAAOA,IAAIA,CAACA,YAAYA,CAACA,MAAMA,CAACA;IAClCA,CAACA;IACHH,eAACA;AAADA,CAACA,IAAA;;;AAoBD;IAOEI,yBAAYA,MAAkCA;QAA9CC,iBAQCA;QAdDA,KAAQA,OAAOA,GAAiBA,EAAEA,CAACA;QAEnCA,KAAQA,YAAYA,GAA0CA,EAAEA,CAACA;QAM/DA,iCAAiCA;QACjCA,MAAMA,CAACA,OAAOA,CAACA,UAACA,KAAKA;YACnBA,KAAIA,CAACA,YAAYA,CAACA,KAAKA,CAACA,IAAIA,CAACA,GAAGA,KAAKA;YACrCA,KAAKA,CAACA,KAAKA,GAAGA,KAAIA;QACpBA,CAACA,CAACA;IAEJA,CAACA;IAEDD,iCAAAA,UAAYA,KAAiBA;QAC3BE,IAAIA,CAACA,OAAOA,CAACA,IAAIA,CAACA,KAAKA,CAACA;QACxBA,OAAOA,CAACA,CAAOA,IAAIA,CAACA;IACtBA,CAACA;;IAEDF,oCAAAA;QACEG,OAAOA,CAACA,CAAgBA,IAAIA,CAACA,OAAOA,CAACA;IACvCA,CAACA;;IAEDH,mCAAAA;QAAAI,iBASCA;QARCA,gBAAgBA;QAChBA,OAAOA,IAAIA,CAACA,OAAOA,CAACA,CAACA,CAClBA,IAAIA,CAACA,UAACA,MAAMA;YACXA,MAAMA,CAACA,OAAOA,CAACA,UAACA,KAAKA;gBACnBA,4BAA4BA;gBAC5BA,KAAIA,CAACA,YAAYA,CAACA,KAAKA,CAACA,IAAIA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA;YAClDA,CAACA,CAACA;QACJA,CAACA,CAACA;IACNA,CAACA;;IAGDJ,kCAAAA;IAAiBK,CAACA;IACpBL,uBAACA;AAADA,CAACA,IAAA;;AAGD;IASEM,yBAAYA,MAAkCA,EAAEA,GAAoBA;QAApEC,iBAqBCA;QArB+CA,QAAWA,GAAHA,GAAGA;AAASA,QAJpEA,KAAQA,YAAYA,GAA0CA,EAAEA,CAACA;QAEjEA,KAAOA,YAAYA,GAAYA,CAACA,CAACA;QAI/BA,iCAAiCA;QACjCA,MAAMA,CAACA,OAAOA,CAACA,UAACA,KAAKA;YACnBA,KAAIA,CAACA,YAAYA,CAACA,KAAKA,CAACA,IAAIA,CAACA,GAAGA,KAAKA;YACrCA,KAAKA,CAACA,KAAKA,GAAGA,KAAIA;QACpBA,CAACA,CAACA;;QAEFA,IAAIA,CAACA,WAAWA,GAAGA,CAACA,CAACA,MAAMA,CAACA,OAAOA,CAACA,WAAWA,CAACA,OAAOA,EAAEA,IAAIA,CAACA,GAAGA,CAACA,CAACA,IAAIA,CAACA,UAACA,EAAMA;YAC3EA,KAAIA,CAACA,EAAEA,GAAGA,EAAEA;YACZA,KAAIA,CAACA,UAAUA,GAAGA,EAAEA,CAACA,UAAUA,CAACA,QAAQA,CAACA;;YAEzCA,OAAOA,CAACA,CAACA,OAAOA,CAACA,KAAIA,CAACA,UAAUA,EAAEA,WAAWA,EAC3CA,CAAEA,EAAEA,MAAMA,EAAEA,EAAEA,GAAGA,EAACA,CAACA,EAAEA,YAAYA,EAAEA,EAAEA,IAAIA,EAAEA,eAAeA,EAACA,EAAEA,EAAEA,CAAEA,CAClEA;QACHA,CAACA,CAACA,CAACA,IAAIA,CAACA,UAACA,QAAcA;YACrBA,oCAAoCA;YACpCA,IAAIA,QAAQA,CAACA,MAAMA,KAAKA,CAACA,CAAEA;gBACzBA,KAAIA,CAACA,YAAYA,GAAGA,QAAQA,CAACA,CAACA,CAACA,CAACA,YAAYA;aAC7CA;QACHA,CAACA,CAACA;IACNA,CAACA;IAEDD,kCAAAA;QACEE,IAAIA,CAACA,EAAEA,CAACA,KAAKA,CAACA,CAACA;IACjBA,CAACA;;IAEDF,iCAAAA,UAAYA,KAAiBA;QAA7BG,iBASCA;QAPCA,IAAIA,CAACA,YAAYA,IAAIA,CAACA;QACtBA,KAAKA,CAACA,YAAYA,GAAGA,IAAIA,CAACA,YAAYA;;QAEtCA,OAAOA,IAAIA,CAACA,WAAWA,CAACA,IAAIA,CAACA;YAC3BA,OAAOA,CAACA,CAACA,OAAOA,CAACA,KAAIA,CAACA,UAAUA,EAAEA,QAAQA,EAAEA,KAAKA,CAACA,CAACA,IAAIA,CAACA;YACxDA,CAACA,CAACA;QACJA,CAACA,CAACA;IACJA,CAACA;;IAEDH,oCAAAA;QAAAI,iBAMCA;QALCA,OAAOA,IAAIA,CAACA,WAAWA,CAACA,IAAIA,CAACA;YAC3BA,OAAOA,CAACA,CAACA,OAAOA,CAACA,KAAIA,CAACA,UAAUA,CAACA,IAAIA,CAACA,CAACA,EAAEA,SAASA,CAACA,CAACA,IAAIA,CAACA,UAACA,IAAIA;gBAC1DA,OAAsBA,IAAIA;YAC5BA,CAACA,CAACA;QACNA,CAACA,CAACA;IACJA,CAACA;;IAEDJ,mCAAAA;QAAAK,iBASCA;QARCA,gBAAgBA;QAChBA,OAAOA,IAAIA,CAACA,OAAOA,CAACA,CAACA,CAClBA,IAAIA,CAACA,UAACA,MAAMA;YACXA,MAAMA,CAACA,OAAOA,CAACA,UAACA,KAAKA;gBACnBA,4BAA4BA;gBAC5BA,KAAIA,CAACA,YAAYA,CAACA,KAAKA,CAACA,IAAIA,CAACA,CAACA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA;YAClDA,CAACA,CAACA;QACJA,CAACA,CAACA;IACNA,CAACA;IAEHL,uBAACA;AAADA,CAACA,IAAA;;AAGD,uBAAuB;AACvB,gBAAgB;AAEhB;IAIEM,qBAAYA,IAAkBA,EAAEA,OAAkBA,EAAEA,aAA2CA;QAA/FC,iBAYCA;QAZWA,SAAWA,GAAJA,IAAIA;AAAOA,QAc9BA,KAAQA,kBAAkBA,GAA4BA,EAAEA,CAACA;QAbvDA,mBAAmBA;QACnBA,OAAOA,CAACA,MAAMA,CAACA,UAACA,MAAQA;YAEtBA,qEAAqEA;YACrEA,KAAIA,CAACA,IAAIA,CAACA,MAAMA,CAACA,EAAmCA,sEAAsEA;;YAE1HA,OAAOA,KAAIA,CAACA,KAAKA,CAACA,IAAIA,CAACA,EAACA,IAAIA,EAAEA,IAAIA,EAAEA,MAAMA,EAAEA,MAAMA,EAAEA,YAAYA,EAAGA,CAACA,CAACA,EAACA,CAACA,CACpEA,IAAIA,CAACA;gBACJA,OAAOA,aAAaA,CAACA,MAAMA,CAACA;YAC9BA,CAACA,CAACA;QACNA,CAACA,CAACA;IACJA,CAACA;IAKDD,kDADkDA;mCAClDA,UAAcA,OAAuBA;QACnCE,IAAIA,CAACA,kBAAkBA,CAACA,IAAIA,CAACA,OAAOA,CAACA,EAAGA,gCAAgCA;IAC1EA,CAACA;;IAGDF,iCADiCA;iCACjCA,UAAYA,KAAOA;QACjBG,IAAIA,CAACA,kBAAkBA,CAACA,OAAOA,CAACA,UAAAA,OAAOA;YACrCA,OAAOA,CAACA,KAAKA,CAACA;QAChBA,CAACA,CAACA;IACJA,CAACA;IAEHH,mBAACA;AAADA,CAACA,IAAA;;AAED,qBAAqB;AACrB,cAAc;AAEd;IAKEI,yBAAYA,SAAqDA;QAJjEC,KAAOA,UAAUA,GAAOA,EAAEA,CAACA;QAE3BA,KAAQA,OAAOA,GAAqCA,EAAEA,CAACA;QAIrDA,IAAIA,IAAIA,GAAGA,IAAIA;QACfA,IAAIA,MAAMA,GAAGA;YACXA,IAAIA,CAACA,OAAOA,CAACA,OAAOA,CAACA,UAACA,MAAMA;gBAC1BA,MAAMA,CAACA,IAAIA,CAACA,UAAUA,CAACA;YACzBA,CAACA,CAACA;QACJA,CAACA;;QAEDA,SAASA,CAACA,IAAIA,CAACA,UAAUA,EAAEA,MAAMA,CAACA;IACpCA,CAACA;IAEDD,sCAAAA,UAAiBA,UAAmCA;QAClDE,IAAIA,CAACA,OAAOA,CAACA,IAAIA,CAACA,UAAUA,CAACA;QAC7BA,UAAUA,CAACA,IAAIA,CAACA,UAAUA,CAACA,EAAGA,iEAAiEA;IACjGA,CAACA;IACHF,uBAACA;AAADA,CAACA,IAAA;;AAGD;IAKEG,yBAAYA,IAAoBA,EAAEA,GAAoBA,EAAEA,UAA+BA,EAAGA,SAAoFA;QAA9KC,iBAcCA;QAdWA,SAAWA,GAAJA,IAAIA;AAASA,QAAEA,QAAWA,GAAHA,GAAGA;AAASA,QAAEA,eAAkBA,GAAVA,UAAUA;AAAaA,QAErFA,IAAIA,CAACA,WAAWA,GAAGA,CAACA,CAACA,MAAMA,CAACA,OAAOA,CAACA,WAAWA,CAACA,OAAOA,EAAEA,IAAIA,CAACA,GAAGA,CAACA,CAC/DA,IAAIA,CAACA,UAACA,EAAMA;YACXA,KAAIA,CAACA,EAAEA,GAAGA,EAAEA;YACZA,KAAIA,CAACA,UAAUA,GAAGA,EAAEA,CAACA,UAAUA,CAACA,IAAIA,CAACA;;YAErCA,IAAIA,IAAIA,GAAGA,KAAIA;YACfA,IAAIA,UAAUA,GAAGA,UAASA,QAAiBA,EAAEA,IAAUA;gBACrDA,OAAOA,CAACA,CAACA,OAAOA,CAAOA,IAAIA,CAACA,UAAUA,EAAEA,QAAQA,EAAEA,IAAIA,CAACA;YACzDA,CAACA;;YAEDA,SAASA,CAACA,UAAUA,CAACA;QACzBA,CAACA,CAACA;IACJA,CAACA;IAEDD,kCAAAA,UAAaA,MAAYA;QACvBE,OAAOA,CAACA,CAACA,OAAOA,CAACA,IAAIA,CAACA,UAAUA,CAACA,IAAIA,CAACA,MAAMA,CAACA,EAAEA,SAASA,CAACA,CAACA,IAAIA,CAACA,UAACA,IAAIA;YAClEA,OAAYA,IAAIA;QAClBA,CAACA,CAACA;IACJA,CAACA;;IAEDF,kCAAAA;QACEG,IAAIA,CAACA,EAAEA,CAACA,KAAKA,CAACA,CAACA;IACjBA,CAACA;IACHH,uBAACA;AAADA,CAACA,IAAA;;AAwBD,YAAY;AAEZ,IAAI,qBAAqB,GAAG,IAAI,OAAO,CAAiB,CAAC;;AAGzD,IAAI,oBAAoB,GAAG,IAAI,WAAW,CACxC,sBAAsB,EACtB,qBAAqB,EACrB,UAAC,MAAM;IACL,iBAAiB;IACjB,OAAO,CAAC,CAAO,IAAI,CAAC;AACtB,CAAC,CACF;;AAED,IAAI,UAAU,GAAG,IAAI,eAAe,CAAC,CAAC,oBAAoB,CAAC,EAAE,gCAAgC,CAAC;;AAC9F,+DAA+D;AAI/D,IAAI,uBAAuB,GAAG,IAAI,eAAe,CAC/C,yBAAyB,EACzB,gCAAgC,EAChC,UAAU,EACV,UAAC,UAAU;IACT,oBAAoB,CAAC,MAAM,CAAC,UAAC,CAAgB;QAE3C,mBAAmB;QACnB,IAAI,KAAK,GAAG,CAAC;QACb,IAAI,CAAC,CAAC,KAAK,IAAI,UAAU,CAAE;YACzB,KAAK,GAAG,CAAC;SACV;;QAED,UAAU,CAAC,QAAQ,EAAE;YACnB,IAAI,EAAE,CAAC,CAAC,IAAI;YACZ,KAAK,EAAE,KAAK;SACb,CAAC;IACJ,CAAC,CAAC;AACJ,CAAC,CAAC;;AAGJ,KAAK;AAEL,+CAA+C;AAC/C,sBAAsB;AACtB,KAAK;AAGL,UAAU,CAAC,MAAM,CAAC,CAAC,CAChB,IAAI,CAAC;IAEJ,OAAO,qBAAqB,CAAC,OAAO,CAAC;QACnC,IAAI,EAAE,QAAQ;QACd,KAAK,EAAE,UAAU;QACjB,MAAM,EAAE;YACN;gBACE,IAAI,EAAE,YAAY;gBAClB,KAAK,EAAG,CAAC;gBACT,QAAQ,EAAG,KAAK;aACjB;YACD;gBACE,IAAI,EAAE,aAAa;gBACnB,KAAK,EAAG,CAAC;gBACT,QAAQ,EAAG,IAAI;aAChB;SACF;KACF,CAAC;AAEJ,CAAC,CAAC,CACD,IAAI,CAAC;IACJ,OAAO,uBAAuB,CAAC,KAAK,CAAC,EAAE,CAAC;IACxC,wEAAwE;AAC1E,CAAC,CAAC,CACD,IAAI,CAAC,UAAC,aAA+B;IACpC,OAAO,CAAC,GAAG,CAAC,0BAA0B,EAAE,aAAa,CAAC;AACxD,CAAC,CAAC,CACD,IAAI,CAAC;IACJ,UAAU,CAAC,KAAK,CAAC,CAAC;IAClB,uBAAuB,CAAC,KAAK,CAAC,CAAC;AACjC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AACX"}