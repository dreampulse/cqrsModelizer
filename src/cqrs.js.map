{"version":3,"file":"cqrs.js","sourceRoot":"","sources":["cqrs.ts"],"names":["Command","Command.constructor","Command.handle","Command.execute","LocalEventStore","LocalEventStore.constructor","LocalEventStore.save","LocalEventStore.restore","LocalEventStore.replay","LocalEventStore.close","MongoEventStore","MongoEventStore.constructor","MongoEventStore.close","MongoEventStore.save","MongoEventStore.restore","MongoEventStore.replay","DomainEvent","DomainEvent.constructor","DomainEvent.handle","DomainEvent.emit","Projection","Projection.constructor","Projection.subscribe"],"mappings":"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"}