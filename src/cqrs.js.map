{"version":3,"file":"cqrs.js","sourceRoot":"","sources":["cqrs.ts"],"names":["Command","Command.constructor","Command.handle","Command.execute","LocalEventStore","LocalEventStore.constructor","LocalEventStore.save","LocalEventStore.restore","MongoEventStore","MongoEventStore.constructor","MongoEventStore.close","MongoEventStore.save","MongoEventStore.restore","DomainEvent","DomainEvent.constructor","DomainEvent.handle","DomainEvent.emit","DomainEvent.replay","Projection","Projection.constructor","Projection.subscribe"],"mappings":"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"}